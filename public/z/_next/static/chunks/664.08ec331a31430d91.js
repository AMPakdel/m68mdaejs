(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{4078:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});var n=o(51438),s=o(52951),a=o(14924),i=function(){function e(){(0,n.Z)(this,e)}return(0,s.Z)(e,null,[{key:"register",value:function(t,o){void 0===e.events[t]&&console.log(t+"is not in events"),e.events[t].push(o)}},{key:"notifyAllObservers",value:function(t,o){e.events[t].forEach((function(e){e&&"function"==typeof e&&e(o)}))}},{key:"unregister",value:function(t,o){var n=null;e.events[t].forEach((function(e,t){o===e&&(n=t)})),null!==n&&(e.events[t][n]=null)}}]),e}();(0,a.Z)(i,"events",{download:[]})},88664:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return F}});var n=o(4111),s=o(51438),a=o(52951),i=o(14924),l=o(88029),r=o(60460),d=o(85893),c=function(){function e(t){var o=this;(0,s.Z)(this,e),(0,i.Z)(this,"downloadObserver",(function(e){var t=e.status,n=e.data;console.log({status:t,data:n}),o.view.PlayerView?n.upload_key&&(n.upload_key===o.view.state.sc_uploadkey&&o.updatePlayerView(t,n),o.updatePlayerList(t,n)):console.log("this.view.PlayerView ="+o.view.PlayerView)})),(0,i.Z)(this,"updatePlayerList",(function(e,t){switch(e){case"progress":var n,s,a,i;if(null===t||void 0===t||null===(n=t.progress)||void 0===n||null===(s=n.total)||void 0===s?void 0:s.percentage)o.updateInPlaylist(t.upload_key,{download_percent:Math.floor(null===t||void 0===t||null===(a=t.progress)||void 0===a||null===(i=a.total)||void 0===i?void 0:i.percentage),download_status:"downloading"});break;case"paused":o.updateInPlaylist(t.upload_key,{download_status:"paused"});break;case"finished":o.updateInPlaylist(t.upload_key,{download_status:"finished"})}})),(0,i.Z)(this,"updatePlayerView",(function(e,t){switch(e){case"progress":var n,s;(null===t||void 0===t||null===(n=t.progress)||void 0===n||null===(s=n.total)||void 0===s?void 0:s.percentage)&&o.view.PlayerView.showDownloadProgress(t.progress.total.percentage);break;case"paused":o.view.PlayerView.showPausedDownload();break;case"finished":o.view.PlayerView.showDownloadFinished(o.view.state.sc_uploadkey)}})),this.view=t}return(0,a.Z)(e,[{key:"updateInPlaylist",value:function(e,t){this.view.state.playlist_data.forEach((function(o,n){o.contents.forEach((function(o,n){o.upload_key===e&&(o=Object.assign(o,t))}))})),this.view.setState({playlist:this.view.state.playlist})}}]),e}(),_=o(4078),u=o(67294),p=o(76427),v=o(1913),y=o(55074),h=o(72563),f=o.n(h),m=p.Z.Panel,g=function(e){(0,l.Z)(o,e);var t=(0,r.Z)(o);function o(e){var a;return(0,s.Z)(this,o),a=t.call(this,e),(0,i.Z)((0,n.Z)(a),"onListToggle",(function(){"opened"==a.props.listToggle?a.arrow.style.transform="rotate(180deg)":a.arrow.style.transform="rotate(0deg)",a.props.onListToggle()})),(0,i.Z)((0,n.Z)(a),"renderDownloadStatus",(function(e,t){return"paused"===t.download_status?(console.log("renderDownloadStatus->paused"),(0,d.jsx)(v.Z,{type:"circle",percent:t.download_percent,width:24,strokeColor:"#333",strokeWidth:8,format:function(e){return(0,d.jsx)("img",{className:f().download_pause_icon,src:"/img/download_pause.svg"})}})):"downloading"===t.download_status?(0,d.jsx)(v.Z,{type:"circle",percent:t.download_percent,width:24,strokeColor:"#333",strokeWidth:8,format:function(e){return(0,d.jsx)("img",{className:f().download_pause_icon,src:"/img/download_downloading.svg"})}}):"need_download"===t.download_status?(0,d.jsx)("img",{className:f().download_icon,src:"/img/download_status.svg"}):null})),(0,i.Z)((0,n.Z)(a),"onContentSelected",(function(e,t,o){a.props.onContentSelected(e,t+1,o+1)})),(0,i.Z)((0,n.Z)(a),"onCollapseChange",(function(e){a.props.onCollapseChange(e)})),(0,i.Z)((0,n.Z)(a),"onOpenCreatorSite",(function(){a.props.onOpenCreatorSite()})),(0,i.Z)((0,n.Z)(a),"onOpenCoursePage",(function(){a.props.onOpenCoursePage()})),(0,i.Z)((0,n.Z)(a),"onBack",(function(){window.electronAPI.openMenuPage("myCourses")})),a.state={},a}return(0,a.Z)(o,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.data||[];return(0,d.jsxs)("div",{className:f().con,children:[(0,d.jsxs)("div",{className:f().wrapper,children:[(0,d.jsx)(y.Z,{className:f().back_btn,title:"\u0628\u0627\u0632\u06af\u0634\u062a",borderMode:!0,onClick:this.onBack}),(0,d.jsxs)("div",{className:f().tab_head_con+" cpnt bdc3 fpc1",children:["\u062c\u0644\u0633\u0647 \u0647\u0627",(0,d.jsx)("div",{className:f().tab_highlight+" bgpc1"})]}),(0,d.jsx)("div",{className:f().content_list,children:(0,d.jsx)(p.Z,{activeKey:this.props.listActiveKey,ghost:!0,onChange:this.onCollapseChange,children:t.map((function(t,o){return(0,d.jsx)(m,{className:f().panel_con+" "+(o%2?"bgw":"bglc1"),header:(0,d.jsx)("div",{className:f().header_con,children:o+1+". "+t.title}),children:t.contents.map((function(n,s){return(0,d.jsxs)("div",{className:f().content_con+(e.props.selectedUploadKey===n.upload_key?" bgsc1":""),onClick:function(){return e.onContentSelected(n,o,s)},children:[(0,d.jsx)("img",{className:f().content_icon,src:"/img/"+n.type+"_icon.svg"}),(0,d.jsx)("div",{className:f().content_title,children:s+1+"."+(o+1)+". "+n.title}),e.renderDownloadStatus(t,n)]},"b".concat(s))}))},"".concat(o))}))})}),(0,d.jsx)(y.Z,{className:f().link_btn,title:"\u0633\u0627\u06cc\u062a \u0633\u0627\u0632\u0646\u062f\u0647 \u062f\u0648\u0631\u0647",borderMode:!1,onClick:this.onOpenCreatorSite}),(0,d.jsx)(y.Z,{className:f().link_btn,title:"\u0635\u0641\u062d\u0647 \u062f\u0648\u0631\u0647 \u062f\u0631 \u0633\u0627\u06cc\u062a",borderMode:!0,onClick:this.onOpenCoursePage})]}),(0,d.jsx)("div",{className:f().toggle_btn+" bgdc3",onClick:this.onListToggle,children:(0,d.jsx)("img",{className:f().arrow,ref:function(t){return e.arrow=t},src:"/img/player_list_arrow.svg"})})]})}}]),o}(u.Component),w=o(69215),Z=o(88330),P=o(75791),k=o.n(P),C=o(5009),b=o.n(C),x=function(e){(0,l.Z)(o,e);var t=(0,r.Z)(o);function o(e){var a;return(0,s.Z)(this,o),a=t.call(this,e),(0,i.Z)((0,n.Z)(a),"player",void 0),(0,i.Z)((0,n.Z)(a),"isVideo",(function(){return"video"===a.props.type})),(0,i.Z)((0,n.Z)(a),"isAudio",(function(){return"audio"===a.props.type})),(0,i.Z)((0,n.Z)(a),"setPlayer",(function(e){a.player=e,a.isAudio()&&(a.player.addEventListener("loadeddata",a.onLoaded),a.player.addEventListener("timeupdate",a.onTimeUpdate),a.player.addEventListener("ended",a.onEnded)),a.isVideo()&&(a.player.video.handleLoadedData=a.onLoaded,a.player.video.handleTimeUpdate=a.onTimeUpdate,a.player.video.handleEnded=a.onEnded,a.OhandlePlay=a.player.video.handlePlay,a.OhandlePause=a.player.video.handlePause,a.player.video.handlePlay=a.play,a.player.video.handlePause=a.pause,a.mouse_over.addEventListener("mouseover",a.mouseEnter),a.mouse_over.addEventListener("mouseout",a.mouseLeave))})),(0,i.Z)((0,n.Z)(a),"removePlayer",(function(){a.isAudio()&&(a.player.removeEventListener("loadeddata",a.onLoaded),a.player.removeEventListener("timeupdate",a.onTimeUpdate),a.player.removeEventListener("ended",a.onEnded)),a.isVideo()&&(a.player.video.handleLoadedData=function(){},a.player.video.handleTimeUpdate=function(){},a.player.video.handleEnded=function(){},a.player.video.handlePlay=function(){},a.player.video.handlePause=function(){},a.mouse_over.addEventListener("mouseover",a.mouseEnter),a.mouse_over.addEventListener("mouseout",a.mouseLeave))})),(0,i.Z)((0,n.Z)(a),"onLoaded",(function(){var e;a.isVideo()?(a.mouseLeave(),e=a.player.getState().player.duration,a.state.is_playing=!0):e=a.player.duration;var t=Math.floor(e),o=t;t=j(t),a.setState({sl_max:o,total_time:t,current_time:"00:00"})})),(0,i.Z)((0,n.Z)(a),"mouseEnter",(function(){a.setState({hide:!1}),a.props.toggleUI(!1),clearTimeout(a.hide_timeout)})),(0,i.Z)((0,n.Z)(a),"mouseLeave",(function(){clearTimeout(a.hide_timeout),a.hide_timeout=setTimeout((function(){a.state.show_speed_popover=!1,a.setState({hide:!0}),a.props.toggleUI(!0)}),3e3)})),(0,i.Z)((0,n.Z)(a),"onTimeUpdate",(function(e){var t;t=a.isVideo()?e.target.currentTime:a.player.currentTime;var o=Math.floor(t),n=o;o=j(o),a.setState({current_time:o,sl_value:n})})),(0,i.Z)((0,n.Z)(a),"onEnded",(function(){a.setState({is_playing:!1,is_ended:!0})})),(0,i.Z)((0,n.Z)(a),"play",(function(e){a.state.is_ended&&(a.isVideo()?a.player.seek(0):a.player.currentTime=0,a.state.is_ended=!1),a.setState({is_playing:!0}),!0===e?a.player.play():a.OhandlePlay()})),(0,i.Z)((0,n.Z)(a),"pause",(function(e){a.state.show_speed_popover=!1,a.setState({is_playing:!1}),!0===e?a.player.pause():a.OhandlePause()})),(0,i.Z)((0,n.Z)(a),"backward",(function(){a.state.is_ended=!1;if(a.isVideo())a.player.replay(15);else{var e=a.player.currentTime;a.player.currentTime=e>15?e-15:0}})),(0,i.Z)((0,n.Z)(a),"forward",(function(){if(a.isVideo())a.player.forward(30);else{var e=a.player.currentTime,t=a.player.duration;a.player.currentTime=t-e>30?e+30:t}})),(0,i.Z)((0,n.Z)(a),"fullscreen",(function(){a.state.fullscreen=!a.state.fullscreen,a.state.show_speed_popover=!1,a.setState(a.state),a.props.toggleFullscreen()})),(0,i.Z)((0,n.Z)(a),"onSliderChange",(function(e){var t;t=a.isVideo()?a.player.getState().player.duration:a.player.duration,e==Math.floor(t)?a.state.is_ended=!0:a.state.is_ended=!1,a.isVideo()?a.player.seek(e):a.player.currentTime=e,a.setState({sl_value:e})})),(0,i.Z)((0,n.Z)(a),"toggleSpeedMenu",(function(){var e=!a.state.show_speed_popover;a.setState({show_speed_popover:e})})),(0,i.Z)((0,n.Z)(a),"onSpeedSelect",(function(e){a.player.playbackRate=e,a.state.show_speed_popover=!1,a.setState({selected_speed:e})})),a.state={is_playing:!1,total_time:!1,is_ended:!1,fullscreen:!1,current_time:"",selected_speed:1,sl_value:0,sl_max:0,show_speed_popover:!1},a}return(0,a.Z)(o,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t="";return this.state.hide&&(t+=b().hide),(0,d.jsx)("div",{className:b().mouse_over,ref:function(t){return e.mouse_over=t},children:(0,d.jsxs)("div",{className:b().con+" "+t,ref:function(t){return e.con=t},children:[(0,d.jsx)("div",{className:b().slider_con,children:(0,d.jsx)(w.iR,{value:this.state.sl_value,min:0,max:this.state.sl_max,tooltip:{open:!1},onChange:this.onSliderChange})}),(0,d.jsxs)("div",{className:b().row1,children:[(0,d.jsx)("div",{className:b().left_side1,children:this.state.total_time?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:b().time1,children:this.state.current_time}),(0,d.jsx)("div",{className:b().time1_5,children:"/"}),(0,d.jsx)("div",{className:b().time2,children:this.state.total_time})]}):null}),(0,d.jsxs)("div",{className:b().right_side1,children:[(0,d.jsxs)("div",{className:b().play_speed_title,children:[(0,d.jsx)("div",{className:b().play_speed_btn,onDoubleClick:function(e){return e.stopPropagation()},onClick:this.toggleSpeedMenu,children:this.state.selected_speed+"x"}),this.state.show_speed_popover?(0,d.jsx)(S,{selectedSpeed:this.state.selected_speed,onSelect:this.onSpeedSelect}):null]}),"video"===this.props.type?(0,d.jsx)("img",{src:this.state.fullscreen?"/img/player_minimize.svg":"/img/player_fullscreen.svg",className:b().fullscreen_btn+" "+b().btn,onClick:this.fullscreen}):null]})]}),(0,d.jsxs)("div",{className:b().row2,children:[(0,d.jsx)("img",{className:b().frw_btn+" "+b().btn,src:"/img/player_bwd.svg",onDoubleClick:function(e){return e.stopPropagation()},onClick:function(t){t.stopPropagation(),e.backward()}}),this.state.is_playing?(0,d.jsx)("img",{className:b().play_btn+" "+b().btn,src:"/img/player_pause.svg",onDoubleClick:function(e){return e.stopPropagation()},onClick:function(t){t.stopPropagation(),e.pause(!0)}}):(0,d.jsx)("img",{className:b().play_btn+" "+b().btn,src:"/img/player_play.svg",onDoubleClick:function(e){return e.stopPropagation()},onClick:function(t){t.stopPropagation(),e.play(!0)}}),(0,d.jsx)("img",{className:b().frw_btn+" "+b().btn,src:"/img/player_fwd.svg",onDoubleClick:function(e){return e.stopPropagation()},onClick:function(t){t.stopPropagation(),e.forward()}})]})]})})}}]),o}(u.Component);function j(e){var t=e>=600?e%600:0,o=e%60;return t+""+Math.floor(t?t/600:e/60)+":"+(o>9?o:"0"+o)}var S=function(e){(0,l.Z)(o,e);var t=(0,r.Z)(o);function o(){var e;return(0,s.Z)(this,o),e=t.apply(this,arguments),(0,i.Z)((0,n.Z)(e),"speeds",[2,1.75,1.5,1.25,1,.75,.5]),e}return(0,a.Z)(o,[{key:"render",value:function(){var e=this;return(0,d.jsx)("div",{className:b().speed_popover,children:this.speeds.map((function(t,o){return(0,d.jsx)("div",{className:b().speed_opt+(e.props.selectedSpeed===t?" fsc1 ":" fw "),onClick:function(){return e.props.onSelect(t)},children:t+"x"},o)}))})}}]),o}(u.Component),N=function(e){(0,l.Z)(o,e);var t=(0,r.Z)(o);function o(e){var a;return(0,s.Z)(this,o),a=t.call(this,e),(0,i.Z)((0,n.Z)(a),"reset",(function(){a.setState({src:null})})),(0,i.Z)((0,n.Z)(a),"onLoadPlayerDone",(function(e){console.log(e),a.setState({src:e},a.setupController)})),(0,i.Z)((0,n.Z)(a),"setupController",(function(){a.MediaController.setPlayer(a.player)})),a.state={src:null},a}return(0,a.Z)(o,[{key:"componentDidMount",value:function(){window.electronAPI.playerLoadPlayer(this.props.uploadKey)}},{key:"componentWillUnmount",value:function(){this.MediaController.removePlayer()}},{key:"render",value:function(){var e=this;return(0,d.jsxs)("div",{className:k().audio_view_finished,style:{backgroundImage:"url(/img/voice_background.svg"},children:[(0,d.jsx)("div",{className:k().audio_prev_title+" flc1",children:this.props.number+" "+this.props.title}),(0,d.jsx)("img",{className:k().audio_center_img,src:"/img/voice_center_img.svg"}),this.state.src?(0,d.jsx)("audio",{ref:function(t){return e.player=t},src:this.state.src,autoPlay:!1,type:"audio/mpeg"}):null,(0,d.jsx)(x,{ref:function(t){return e.MediaController=t},type:"audio"})]})}}]),o}(u.Component),L=o(76129),M=o(23631),D=o.n(M),V=o(31799),A=o.n(V),E=function(e){(0,l.Z)(o,e);var t=(0,r.Z)(o);function o(e){var a;return(0,s.Z)(this,o),a=t.call(this,e),(0,i.Z)((0,n.Z)(a),"reset",(function(){a.setState({src:null})})),(0,i.Z)((0,n.Z)(a),"onLoadPlayerDone",(function(e){a.setState({src:e},a.setupController)})),(0,i.Z)((0,n.Z)(a),"setupController",(function(){var e;a.MediaController.setPlayer(a.player),console.log(a.player),null===(e=a.con)||void 0===e||e.addEventListener("mousemove",a.onConMouseMove)})),(0,i.Z)((0,n.Z)(a),"toggleFullscreen",(function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():a.con.requestFullscreen()})),(0,i.Z)((0,n.Z)(a),"onConMouseMove",(function(){a.toggleUI(!1)})),(0,i.Z)((0,n.Z)(a),"toggleUI",(function(e){a.con&&(a.con.style.cursor=e?"none":"unset")})),(0,i.Z)((0,n.Z)(a),"onVideoDoubleClick",(function(e){e.stopPropagation(),a.MediaController&&a.MediaController.fullscreen()})),a.state={src:null},a}return(0,a.Z)(o,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=this.MediaController)||void 0===e||e.removePlayer(),null===(t=this.con)||void 0===t||t.addEventListener("mousemove",this.onConMouseMove)}},{key:"render",value:function(){var e=this;return(0,d.jsx)(d.Fragment,{children:this.state.src?(0,d.jsxs)("div",{className:A().video,ref:function(t){return e.con=t},onDoubleClick:this.onVideoDoubleClick,children:[(0,d.jsxs)(Z.J5,{fluid:!1,height:"100%",width:"100%",ref:function(t){return e.player=t},preload:"auto",autoPlay:!0,children:[(0,d.jsx)("source",{src:this.state.src}),(0,d.jsx)(Z.VS,{disableCompletely:!0,disableDefaultControls:!1})]}),(0,d.jsx)(x,{ref:function(t){return e.MediaController=t},toggleFullscreen:this.toggleFullscreen,toggleUI:this.toggleUI,type:"video"})]}):(0,d.jsxs)("div",{className:A().video_prev_finished,style:{backgroundImage:"url(/img/voice_background.svg"},children:[(0,d.jsx)("div",{className:A().video_prev_title+" flc1",children:this.props.number+" "+this.props.title}),(0,d.jsx)("img",{className:A().video_prev_play_img,src:"/img/player_play.svg",onClick:this.props.onOpenPlayer})]})})}}]),o}(u.Component),O=function(e){(0,l.Z)(o,e);var t=(0,r.Z)(o);function o(e){var a;return(0,s.Z)(this,o),a=t.call(this,e),(0,i.Z)((0,n.Z)(a),"openDocument",(function(){var e=a.props.coursePK,t=a.state.sc_uploadkey;window.electronAPI.playerOpenDocument({course_pk:e,upload_key:t})})),(0,i.Z)((0,n.Z)(a),"onStartDownload",(function(){a.setState({status:"loading"},(function(){a.props.onStartDownload(a.state.sc_uploadkey)}))})),(0,i.Z)((0,n.Z)(a),"onPauseDownload",(function(){a.setState({status:"loading"},(function(){a.props.onPauseDownload(a.state.sc_uploadkey)}))})),(0,i.Z)((0,n.Z)(a),"onContentSelected",(function(e){var t,o;"ct_video"==e.selected_content.type?null===(t=a.VideoPlayer)||void 0===t||t.reset():null===(o=a.AudioPlayer)||void 0===o||o.reset();a.setState(e)})),(0,i.Z)((0,n.Z)(a),"showDownloadProgress",(function(e){isNaN(Number(e))||a.setState({status:"downloading",download_percent:Math.floor(e+.1)})})),(0,i.Z)((0,n.Z)(a),"showPausedDownload",(function(){a.setState({status:"download_paused"})})),(0,i.Z)((0,n.Z)(a),"showCanceledDownload",(function(){a.setState({status:a.state.sc_type+"-need_download"})})),(0,i.Z)((0,n.Z)(a),"showDownloadFinished",(function(){try{var e=a.state.selected_content,t=e,o=e.type;a.setState({selected_content:t,status:o+"-finished",download_percent:100})}catch(n){console.log(n)}})),(0,i.Z)((0,n.Z)(a),"onOpenPlayer",(function(){a.props.onLoadPlayer()})),(0,i.Z)((0,n.Z)(a),"showPlayer",(function(e){"ct_video"==a.state.selected_content.type?a.VideoPlayer.onLoadPlayerDone(e):a.AudioPlayer.onLoadPlayerDone(e)})),a.state={status:"loading",course_store_dir:null,sc_title:null,sc_course_pk:null,sc_uploadkey:null,sc_type:null,sc_num:null,sc_download_status:null,download_percent:0},a}return(0,a.Z)(o,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return(0,d.jsxs)("div",{className:D().con,children:["loading"==this.state.status?(0,d.jsx)("div",{className:D().video_prev_finished,children:(0,d.jsx)("div",{className:D().loading_btn,children:(0,d.jsx)(L.Z,{scale:.35})})}):null,"ct_voice-finished"==this.state.status?(0,d.jsx)(N,{ref:function(t){return e.AudioPlayer=t},uploadKey:this.state.sc_uploadkey,number:this.state.sc_num,title:this.state.sc_title}):null,"ct_video-finished"==this.state.status?(0,d.jsx)(E,{ref:function(t){return e.VideoPlayer=t},onOpenPlayer:this.onOpenPlayer,upload_key:this.state.sc_uploadkey,number:this.state.sc_num,title:this.state.sc_title}):null,"ct_document-finished"==this.state.status?(0,d.jsxs)("div",{className:D().video_prev_finished,style:{backgroundImage:"url(/img/voice_background.svg"},children:[(0,d.jsx)("div",{className:D().video_prev_title+" flc1",children:this.state.sc_num+" "+this.state.sc_title}),(0,d.jsx)(y.Z,{className:D().open_document_btn,title:"\u0628\u0627\u0632 \u06a9\u0631\u062f\u0646 \u0641\u0627\u06cc\u0644 \u0645\u062a\u0646",onClick:this.openDocument})]}):null,"ct_video-need_download"==this.state.status||"ct_voice-need_download"==this.state.status||"ct_document-need_download"==this.state.status?(0,d.jsxs)("div",{className:D().video_prev_finished,children:[(0,d.jsx)("div",{className:D().video_prev_download_btn,onClick:this.onStartDownload,children:(0,d.jsx)("img",{className:D().video_prev_download_img,src:"/img/player_download.svg"})}),(0,d.jsx)("div",{className:D().video_prev_title+" flc1",children:this.state.sc_num+" "+this.state.sc_title})]}):null,"downloading"==this.state.status||"download_paused"==this.state.status?(0,d.jsxs)("div",{className:D().video_prev_finished,children:[(0,d.jsx)("div",{className:D().video_prev_download_btn,onClick:"download_paused"==this.state.status?this.onStartDownload:this.onPauseDownload,children:(0,d.jsx)(w.Ex,{type:"circle",width:84,percent:this.state.download_percent,format:function(t){return"download_paused"==e.state.status?(0,d.jsx)("img",{className:D().download_pause_btn,src:"/img/player_pause.svg"}):(0,d.jsx)("div",{children:t+"%"})},strokeWidth:8,strokeColor:"#6F3AF9"})}),(0,d.jsx)("div",{className:D().video_prev_title+" flc1",children:this.state.sc_num+" "+this.state.sc_title})]}):null]})}}]),o}(u.Component),T=o(99252),I=o(78109),U=o.n(I),F=function(e){(0,l.Z)(o,e);var t=(0,r.Z)(o);function o(e){var a;return(0,s.Z)(this,o),a=t.call(this,e),(0,i.Z)((0,n.Z)(a),"name","player"),(0,i.Z)((0,n.Z)(a),"onListToggle",(function(){"opened"==a.state.list_toggle?(a.right_side.style.width="0.7rem",a.player_con.style.width="calc(100% - 0.7rem)",a.setState({list_toggle:"closed"})):(a.right_side.style.width="16rem",a.player_con.style.width="calc(100% - 16rem)",a.setState({list_toggle:"opened"}))})),(0,i.Z)((0,n.Z)(a),"setupPlaylist",(function(e,t){console.log(t);var o=t[0].contents[0],n=o.upload_key;a.state.default_sc_uploadkey&&(n=a.state.sc_uploadkey);var s=[];t.forEach((function(e,t){s.push(t.toString()),a.state.default_sc_uploadkey&&e.contents.forEach((function(e){e.upload_key===a.state.default_sc_uploadkey&&(o=e)}))})),a.setState({playlist_data:t,list_ative_key:s,sc_uploadkey:n},(function(){a.onContentSelected(o,1,1,!0)}))})),(0,i.Z)((0,n.Z)(a),"onContentSelected",(function(e,t,o,n){if(e.upload_key!=a.state.sc_uploadkey||n){window.electronAPI.playerContentSelect({course_pk:a.state.sc_course_pk,upload_key:e.upload_key});var s=e,i=e.upload_key,l=e.title,r=o+"."+t,d=e.type,c=e.download_status;a.setState({selected_content:s,sc_uploadkey:i});var _=d+"-"+c,u=0;"paused"==c&&(_="download_paused",u=e.download_percent),a.PlayerView.onContentSelected({selected_content:s,status:_,download_percent:u,sc_uploadkey:i,sc_title:l,sc_num:r,sc_type:d,sc_download_status:c})}})),(0,i.Z)((0,n.Z)(a),"onStartDownload",(function(){window.electronAPI.downloadStart({course_pk:a.state.sc_course_pk,content:a.state.selected_content})})),(0,i.Z)((0,n.Z)(a),"onPauseDownload",(function(e){window.electronAPI.downloadPause(e)})),(0,i.Z)((0,n.Z)(a),"onPlayerListCollapseChange",(function(e){a.setState({list_ative_key:e})})),(0,i.Z)((0,n.Z)(a),"onOpenCreatorSite",(function(){window.electronAPI.playerOpenCreatorSite(a.props.data)})),(0,i.Z)((0,n.Z)(a),"onOpenCoursePage",(function(){window.electronAPI.playerOpenCoursePage(a.props.data)})),(0,i.Z)((0,n.Z)(a),"onLoadPlayer",(function(){window.electronAPI.playerLoadPlayer(a.state.sc_uploadkey)})),(0,i.Z)((0,n.Z)(a),"onLoadPlayerDone",(function(e,t){a.PlayerView&&a.PlayerView.showPlayer(t)})),(0,i.Z)((0,n.Z)(a),"onReleasePlayerDone",(function(e,t){console.log("onReleasePlayerDone")})),a.controller=new c((0,n.Z)(a)),a.state={list_toggle:"opened",playlist_data:[],list_ative_key:[],default_sc_uploadkey:e.data.app_selected_upload_key,sc_uploadkey:null,sc_course_pk:e.data.pk,player_status:"ct_video_finished",video_src:"http://127.0.0.1:1447/video.mp4"},window.electronAPI.playerSetPlaylist(a.setupPlaylist),window.electronAPI.playerLoadPlayerDone(a.onLoadPlayerDone),window.electronAPI.playerReleasePlayerDone(a.onReleasePlayerDone),a}return(0,a.Z)(o,[{key:"componentDidMount",value:function(){window.electronAPI.pageDidMount(this.name),_.Z.register("download",this.controller.downloadObserver),console.log(this.props.data)}},{key:"componentWillUnmount",value:function(){window.electronAPI.pageWillUnmount(this.name),_.Z.unregister("download",this.controller.downloadObserver)}},{key:"render",value:function(){var e=this;return(0,d.jsx)(T.Z,{selected:this.name,children:(0,d.jsxs)("div",{className:U().con,children:[(0,d.jsx)("div",{className:U().right_side_con,ref:function(t){return e.right_side=t},children:(0,d.jsx)(g,{ref:function(t){return e.PlayerList=t},listToggle:this.state.list_toggle,listActiveKey:this.state.list_ative_key,selectedUploadKey:this.state.sc_uploadkey,onListToggle:this.onListToggle,onContentSelected:this.onContentSelected,onCollapseChange:this.onPlayerListCollapseChange,onOpenCreatorSite:this.onOpenCreatorSite,onOpenCoursePage:this.onOpenCoursePage,data:this.state.playlist_data})}),(0,d.jsx)("div",{className:U().player_con+" bgdc1",ref:function(t){return e.player_con=t},children:(0,d.jsx)(O,{ref:function(t){return e.PlayerView=t},coursePK:this.state.sc_course_pk,onLoadPlayer:this.onLoadPlayer,onStartDownload:this.onStartDownload,onPauseDownload:this.onPauseDownload})})]})})}}]),o}(u.Component)},99252:function(e,t,o){"use strict";o.d(t,{Z:function(){return u}});var n=o(51438),s=o(52951),a=o(88029),i=o(60460),l=o(85893),r=o(67294),d=o(23093),c=o.n(d),_=o(61160),u=function(e){(0,a.Z)(o,e);var t=(0,i.Z)(o);function o(e){var s;return(0,n.Z)(this,o),(s=t.call(this,e)).state={},s}return(0,s.Z)(o,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return(0,l.jsx)(_.Z,{children:(0,l.jsx)("div",{className:c().con,children:this.props.children})})}}]),o}(r.Component)},75791:function(e){e.exports={audio_view_finished:"AudioPlayer_audio_view_finished__yifpd",audio_center_img:"AudioPlayer_audio_center_img__68sto",audio_prev_title:"AudioPlayer_audio_prev_title__tMsBf"}},5009:function(e){e.exports={mouse_over:"MediaController_mouse_over__UK2xQ",con:"MediaController_con__RbusF",hide:"MediaController_hide__Gj_8m",title:"MediaController_title__v96FU",row1:"MediaController_row1__b0ucA",left_side1:"MediaController_left_side1__7cFQC",right_side1:"MediaController_right_side1__0C_yW",time1:"MediaController_time1__ND11o",time1_5:"MediaController_time1_5__qKYGx",time2:"MediaController_time2__1FbZj",play_speed_title:"MediaController_play_speed_title__suQ7U",row2:"MediaController_row2__sYyws",slider_con:"MediaController_slider_con__aZWTg",frw_btn:"MediaController_frw_btn__xA_TZ",play_btn:"MediaController_play_btn__Nu8Q_",fullscreen_btn:"MediaController_fullscreen_btn__qVTjJ",btn:"MediaController_btn__Q6qfR",play_speed_btn:"MediaController_play_speed_btn__scgVM",speed_popover:"MediaController_speed_popover__ut5MA",speed_opt:"MediaController_speed_opt__HFmU_"}},72563:function(e){e.exports={con:"PlayerList_con__l90M8",wrapper:"PlayerList_wrapper__XHGHD",toggle_btn:"PlayerList_toggle_btn__yb5wX",arrow:"PlayerList_arrow__MWU6p",back_btn:"PlayerList_back_btn__MS2Kh",tab_head_con:"PlayerList_tab_head_con__hQ8gm",tab_highlight:"PlayerList_tab_highlight__4j5ez",content_list:"PlayerList_content_list__QO2V_",panel_con:"PlayerList_panel_con__i21ft",header_con:"PlayerList_header_con___qTv2",content_con:"PlayerList_content_con__cutYV",content_icon:"PlayerList_content_icon__O9xgE",content_title:"PlayerList_content_title__CVDph",download_progress:"PlayerList_download_progress__2kb7f",download_stop:"PlayerList_download_stop__HaUCu",download_pause_icon:"PlayerList_download_pause_icon__WWL9j",download_icon:"PlayerList_download_icon__t_fpG",link_btn:"PlayerList_link_btn__yk4Iu"}},23631:function(e){e.exports={con:"PlayerView_con__OKuF5",loading_btn:"PlayerView_loading_btn__AA7co",video:"PlayerView_video__6lZdK",video_prev_finished:"PlayerView_video_prev_finished__B_8rM",video_prev_play_img:"PlayerView_video_prev_play_img__JG8bV",video_prev_title:"PlayerView_video_prev_title__4VTiI",video_prev_download_btn:"PlayerView_video_prev_download_btn__Or98h",video_prev_download_img:"PlayerView_video_prev_download_img__8Lzp_"}},31799:function(e){e.exports={video:"VideoPlayer_video__Iaz3u",video_prev_finished:"VideoPlayer_video_prev_finished__tYM21",video_prev_play_img:"VideoPlayer_video_prev_play_img__SsmVN",video_prev_title:"VideoPlayer_video_prev_title__U6xhA",video_prev_download_btn:"VideoPlayer_video_prev_download_btn__JAba9",video_prev_download_img:"VideoPlayer_video_prev_download_img__RxET7"}},78109:function(e){e.exports={con:"Player_con__6F0Kb",right_side_con:"Player_right_side_con__HfDRA",player_con:"Player_player_con__4RqYt"}},23093:function(e){e.exports={con:"MainLayout_con__PDf1m"}}}]);